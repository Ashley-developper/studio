<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows 10 Experience</title>
    <style>
        :root {
            --win-blue: #0078d7;
            --win-border: rgba(255, 255, 255, 0.4);
            --win-bg-input: rgba(0, 0, 0, 0.45);
            --win-grey-trans: rgba(128, 128, 128, 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Segoe UI Light', sans-serif;
        }

        body {
            height: 100vh;
            width: 100vw;
            background: #000;
            overflow: hidden;
            color: white;
        }

        /* --- 1. 启动加载屏幕 (Loading Screen) --- */
        #boot-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0078d7;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 1s ease;
        }

        .win-loader {
            position: relative;
            width: 60px;
            height: 60px;
            margin-bottom: 30px;
        }

        .dot {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            animation: orbit 5.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        .dot::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 7px;
            height: 7px;
            background: #fff;
            border-radius: 50%;
        }

        .dot:nth-child(1) { animation-delay: 0.2s; }
        .dot:nth-child(2) { animation-delay: 0.4s; }
        .dot:nth-child(3) { animation-delay: 0.6s; }
        .dot:nth-child(4) { animation-delay: 0.8s; }
        .dot:nth-child(5) { animation-delay: 1.0s; }

        .loading-text {
            font-size: 24px;
            font-weight: 350;
            letter-spacing: 0.5px;
        }

        @keyframes orbit {
            0% { transform: rotate(225deg); opacity: 1; animation-timing-function: ease-out; }
            7% { transform: rotate(345deg); animation-timing-function: linear; }
            30% { transform: rotate(455deg); animation-timing-function: ease-in-out; }
            39% { transform: rotate(690deg); animation-timing-function: linear; }
            70% { transform: rotate(815deg); opacity: 1; animation-timing-function: ease-out; }
            75% { transform: rotate(945deg); opacity: 0; }
            100% { transform: rotate(945deg); opacity: 0; }
        }

        /* --- 背景容器 --- */
        .main-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('win10.jpg') no-repeat center center fixed;
            background-size: cover;
        }

        /* --- 2. 锁屏 (Lock Screen) --- */
        #lock-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 0 0 50px 50px;
            background: rgba(0,0,0,0.1);
            transition: opacity 0.8s ease, visibility 0.8s;
            cursor: pointer;
        }

        #lock-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .time-display { font-size: 96px; font-weight: 300; line-height: 1; }
        .date-display { font-size: 42px; font-weight: 300; margin-top: 10px; }

        /* --- 3. 登录界面 (Login Screen) --- */
        .login-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(0px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: backdrop-filter 0.8s ease, opacity 0.8s ease;
            opacity: 0;
            pointer-events: none;
            padding-bottom: 100px;
        }

        body.unlocked .login-overlay {
            backdrop-filter: blur(25px) saturate(125%);
            opacity: 1;
            pointer-events: all;
        }

        .user-section { text-align: center; width: 320px; }
        
        .avatar-container {
            width: 190px; height: 190px; margin: 0 auto 20px;
            border-radius: 50%; background: #0078d7;
            border: 1px solid var(--win-border);
            display: flex; justify-content: center; align-items: center; 
            overflow: hidden;
        }
        .avatar-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .display-name { font-size: 48px; font-weight: 300; margin-bottom: 24px; }

        .input-group { margin-bottom: 10px; width: 100%; position: relative; }
        input {
            width: 100%; padding: 9px 12px; font-size: 15px; outline: none;
            background: var(--win-bg-input); border: 2px solid var(--win-border); color: white;
            transition: background 0.2s;
        }
        input:focus { background: white !important; color: black !important; border-color: white; }

        .password-controls {
            position: absolute; right: 0; top: 0; height: 100%;
            display: flex; align-items: stretch;
        }
        .control-btn { background: transparent; border: none; width: 38px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        .eye-toggle svg { width: 18px; fill: white; opacity: 0.7; }
        input:focus ~ .password-controls .eye-toggle svg { fill: black; }

        .submit-arrow {
            background: var(--win-grey-trans); border: 2px solid var(--win-border); border-left: 1px solid var(--win-border);
            transition: all 0.2s;
        }
        .submit-arrow svg { width: 20px; fill: white; }
        input:focus ~ .password-controls .submit-arrow { border-color: #ccc; }
        input:focus ~ .password-controls .submit-arrow svg { fill: black; }

        .submit-arrow:hover svg { fill: white !important; }

        .domain-text { margin-top: 24px; font-size: 13px; color: rgba(255, 255, 255, 0.7); }

        .system-tray { position: absolute; bottom: 32px; right: 48px; display: flex; gap: 24px; }
        .system-tray svg { width: 24px; height: 24px; fill: white; opacity: 0.85; }

        /* --- 4. 登录后状态 --- */
        #welcome-section {
            display: none;
            flex-direction: column;
            align-items: center;
        }
        .welcome-msg-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            height: 40px;
        }
        .welcome-text {
            font-size: 28px;
            font-weight: 300;
        }
        .welcome-loader {
            transform: scale(0.65);
            margin-bottom: 0;
            width: 60px;
            height: 60px;
        }

        /* --- 5. 蓝屏 (BSOD) & 碎裂故障 --- */
        #bsod {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #0078d7;
            color: white;
            z-index: 9999;
            display: none;
            flex-direction: column;
            justify-content: flex-start;
            padding: 8% 12%;
            user-select: none;
            cursor: none;
        }
        #bsod .sad-face { font-size: 120px; margin-bottom: 25px; }
        #bsod .main-text { font-size: 26px; font-weight: 300; line-height: 1.4; margin-bottom: 20px; max-width: 850px; }
        #bsod .percent { font-size: 26px; margin-bottom: 40px; }
        #bsod .footer-section { display: flex; gap: 25px; align-items: flex-start; }
        #bsod .qr-box { width: 120px; height: 120px; background: white; padding: 8px; display: flex; justify-content: center; align-items: center; }
        #bsod .qr-box img { width: 100%; height: 100%; }
        #bsod .info-text { font-size: 14px; line-height: 1.6; font-weight: 300; }

        /* R键：蓝屏碎裂条 */
        .glitch-bar {
            position: fixed;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.4);
            mix-blend-mode: overlay;
            z-index: 10000;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        /* --- 6. E键：严重花屏损坏 (Broken Screen) --- */
        #broken-screen {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 20000;
            background: 
                /* 局部黑色死区 */
                linear-gradient(90deg, transparent 10%, black 10%, black 15%, transparent 15%),
                linear-gradient(90deg, transparent 80%, black 80%, black 95%, transparent 95%),
                /* 彩色竖条 */
                repeating-linear-gradient(
                    90deg,
                    #ff0000 0px, #ff0000 2px,
                    #00ff00 2px, #00ff00 4px,
                    #0000ff 4px, #0000ff 6px,
                    #ffff00 6px, #ffff00 8px,
                    #00ffff 8px, #00ffff 10px,
                    #ff00ff 10px, #ff00ff 12px,
                    #000000 12px, #000000 14px
                );
            animation: flicker-hard 0.05s infinite;
            pointer-events: none;
            mix-blend-mode: normal;
        }

        @keyframes flicker-hard {
            0% { opacity: 0.95; transform: translateX(0); filter: hue-rotate(0deg); }
            25% { opacity: 1; transform: translateX(-2px); filter: hue-rotate(90deg); }
            50% { opacity: 0.8; transform: translateX(2px); filter: invert(1); }
            75% { opacity: 1; transform: translateX(0); filter: hue-rotate(180deg); }
            100% { opacity: 0.9; transform: translateX(-1px); }
        }

    </style>
</head>
<body>

    <div id="boot-loader">
        <div class="win-loader">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
        <div class="loading-text">Patientez...</div>
    </div>

    <div id="bsod">
        <div class="sad-face">:(</div>
        <div class="main-text">
            Votre ordinateur a rencontré un problème et doit redémarrer. Nous collectons simplement des informations relatives aux erreurs, puis nous allons redémarrer l'ordinateur pour vous.
        </div>
        <div class="percent">100% complété</div>
        <div class="footer-section">
            <div class="qr-box">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=110x110&data=https://windows.com/stopcode" alt="QR">
            </div>
            <div class="info-text">
                Pour plus d'informations sur ce problème et les solutions possibles, consultez https://www.windows.com/stopcode<br><br>
                Si vous appelez un technicien, donnez-lui ces informations :<br>
                Code d'arrêt : <span style="font-weight: 600;">CRITICAL_PROCESS_DIED</span><br>
                Élément ayant échoué : ntoskrnl.exe
            </div>
        </div>
    </div>

    <div id="broken-screen"></div>

    <div class="main-background">
        <div id="lock-screen">
            <div class="time-display" id="time">00:00</div>
            <div class="date-display" id="date">Loading...</div>
        </div>

        <div class="login-overlay">
            <div class="user-section" id="login-fields">
                <div class="avatar-container">
                    <img src="avatar.jpg" alt="Avatar">
                </div>
                <div class="display-name">Autre utilisateur</div>
                <form id="loginForm">
                    <div class="input-group">
                        <input type="text" placeholder="Nom d'utilisateur" spellcheck="false">
                    </div>
                    <div class="input-group">
                        <input type="password" id="passwordInput" placeholder="Mot de passe">
                        <div class="password-controls">
                            <button type="button" class="control-btn eye-toggle" id="togglePassword">
                                <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                            </button>
                            <button type="submit" class="control-btn submit-arrow">
                                <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </button>
                        </div>
                    </div>
                </form>
                <div class="domain-text">Se connecter à : PED</div>
            </div>

            <div class="user-section" id="welcome-section">
                <div class="avatar-container">
                    <img src="avatar.jpg" alt="Avatar">
                </div>
                <div class="display-name">Zhou, Z</div>
                <div class="welcome-msg-container">
                    <div class="welcome-text">Bienvenue</div>
                    <div class="win-loader welcome-loader">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>

            <div class="system-tray">
                <svg viewBox="0 0 24 24"><path d="M15.91 13.34L12 17.25l-3.91-3.91a5.5 5.5 0 1 1 7.82 0z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"/></svg>
            </div>
        </div>
    </div>

    <script>
        // 键盘锁定功能检测与实现
        const supportsKeyboardLock = ('keyboard' in navigator) && ('lock' in navigator.keyboard);
        
        if (supportsKeyboardLock) {
            document.addEventListener('fullscreenchange', async () => {
                if (document.fullscreenElement) {
                    // 锁定 ESC 键
                    await navigator.keyboard.lock(['Escape']);
                    console.log('Keyboard locked.');
                    return;
                }
                navigator.keyboard.unlock();
                console.log('Keyboard unlocked.');
            });
        }
        
        let currentState = 'patientez'; 
        let escPressTime = 0;
        let escTimer = null;
        let secretInput = '';
        const secretCode = 'agocrate';
        
        function triggerGlitch() {
            for(let i = 0; i < 8; i++) {
                const bar = document.createElement('div');
                bar.className = 'glitch-bar';
                const height = Math.random() * 50 + 2;
                bar.style.height = height + 'px';
                bar.style.top = Math.random() * 100 + '%';
                bar.style.opacity = Math.random();
                bar.style.left = (Math.random() * 10 - 5) + 'px';
                document.body.appendChild(bar);
                
                setTimeout(() => bar.remove(), Math.random() * 150 + 50);
            }
        }

        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false });
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            const dateStr = now.toLocaleDateString('fr-FR', options);
            document.getElementById('time').textContent = timeStr;
            document.getElementById('date').textContent = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);
        }
        setInterval(updateClock, 1000);
        updateClock();

        window.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            
            // ESC 长按处理（2秒后退出全屏）
            if (key === 'escape') {
                if (escPressTime === 0) {
                    escPressTime = Date.now();
                    escTimer = setTimeout(() => {
                        const elapsed = Date.now() - escPressTime;
                        if (elapsed >= 2000) {
                            // ESC 长按 2 秒后退出全屏并解锁键盘
                            if (document.fullscreenElement) {
                                document.exitFullscreen();
                            }
                            if (supportsKeyboardLock) {
                                navigator.keyboard.unlock();
                            }
                        }
                        escPressTime = 0;
                    }, 2100);
                }
                return;
            }
            
            // 特殊按键序列检测
            if (key.length === 1 && key.match(/[a-z]/i)) {
                secretInput += key;
                
                // 检查是否匹配秘密代码
                if (secretInput.includes(secretCode)) {
                    // 匹配成功，关闭页面
                    window.open('', '_self').close();
                    return;
                }
                
                // 限制输入长度，避免过长
                if (secretInput.length > 20) {
                    secretInput = secretInput.slice(-20);
                }
            }

            // 全屏
            if (key === 'o') {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(() => {});
                }
                return;
            }

            // M: 加载 -> 登录
            if (key === 'm' && currentState === 'patientez') {
                setTimeout(() => {
                    document.getElementById('boot-loader').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('boot-loader').style.display = 'none';
                        currentState = 'login';
                    }, 1000);
                }, 3000);
            }

            // N: 欢迎 -> 蓝屏
            if (key === 'n' && currentState === 'bienvenue') {
                setTimeout(() => {
                    document.getElementById('bsod').style.display = 'flex';
                    currentState = 'bsod';
                }, 3000);
            }

            // R: 蓝屏下小故障
            if (key === 'r' && currentState === 'bsod') {
                triggerGlitch();
            }

            // E: 3秒后彻底花屏 
            if (key === 'e') {
                setTimeout(() => {
                    document.getElementById('broken-screen').style.display = 'block';
                    currentState = 'broken';
                }, 3000);
            }

            if (currentState === 'login') {
                unlock();
            }
        });
        
        // ESC 键释放处理
        document.addEventListener('keyup', (e) => {
            if (e.key.toLowerCase() === 'escape') {
                clearTimeout(escTimer);
                escPressTime = 0;
            }
        });

        const lockScreen = document.getElementById('lock-screen');
        const unlock = () => {
            lockScreen.classList.add('hidden');
            document.body.classList.add('unlocked');
        };
        lockScreen.addEventListener('click', unlock);

        const passwordInput = document.getElementById('passwordInput');
        const toggleBtn = document.getElementById('togglePassword');
        const showPass = () => passwordInput.type = 'text';
        const hidePass = () => passwordInput.type = 'password';
        toggleBtn.addEventListener('mousedown', showPass);
        toggleBtn.addEventListener('mouseup', hidePass);
        toggleBtn.addEventListener('mouseleave', hidePass);

        const loginForm = document.getElementById('loginForm');
        const loginFields = document.getElementById('login-fields');
        const welcomeSection = document.getElementById('welcome-section');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            loginFields.style.display = 'none';
            welcomeSection.style.display = 'flex';
            currentState = 'bienvenue';
        });
    </script>
</body>
</html>
